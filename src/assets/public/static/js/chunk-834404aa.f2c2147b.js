(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-834404aa"],{"0ad0":function(e,t,n){"use strict";n.r(t);var a=n("f2bf"),o=Object(a["createTextVNode"])("地图"),c={ref:"container",style:{width:"100%",height:"100%"}},i={style:{position:"absolute",left:"80px",top:"10px"}},l={style:{position:"absolute",right:"10px",bottom:"10px"}},d={class:"info"},r=Object(a["createVNode"])("b",null,"当前选择地址: ",-1);function u(e,t,n,u,p,s){var m=Object(a["resolveComponent"])("el-button"),f=Object(a["resolveComponent"])("el-input"),b=Object(a["resolveComponent"])("el-card"),O=Object(a["resolveComponent"])("el-drawer");return Object(a["openBlock"])(),Object(a["createBlock"])("div",null,[Object(a["createVNode"])(f,{modelValue:e.mapAddress,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.mapAddress=t})},{append:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(m,{icon:"el-icon-map-location",onClick:t[1]||(t[1]=function(t){return e.drawer=!0})},{default:Object(a["withCtx"])((function(){return[o]})),_:1})]})),_:1},8,["modelValue"]),Object(a["createVNode"])(O,{"custom-class":"el-drawers","append-to-body":!0,modelValue:e.drawer,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.drawer=t}),direction:"ttb",size:"50%","destroy-on-close":!0,"with-header":!1,onOpened:e.init},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])("div",c,null,512),Object(a["createVNode"])("div",i,[Object(a["createVNode"])(b,{"body-style":{padding:"10px"}},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(f,{id:"tipinput",modelValue:e.searchText,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.searchText=t}),placeholder:"请输入关键字",size:"mini","prefix-icon":"el-icon-search"},null,8,["modelValue"])]})),_:1})]),Object(a["createVNode"])("div",l,[Object(a["createVNode"])(b,{"body-style":{padding:"10px"}},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])("div",d,[r,Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.mapAddress),1)])]})),_:1})])]})),_:1},8,["modelValue","onOpened"])])}n("a9e3"),n("a15b"),n("ac1f"),n("841c"),n("b0c0");var p=Object(a["defineComponent"])({name:"EadminAmap",props:{modelValue:String,lat:[Number,String],lng:[Number,String],apiKey:{type:String,default:""}},emits:["update:modelValue","update:lat","update:lng"],setup:function(e,t){var n=Object(a["ref"])(""),o=Object(a["ref"])(""),c=Object(a["ref"])(!1),i=Object(a["ref"])(e.modelValue);function l(e,t){var n=document.createElement("script");n.charset="utf-8",n.id=t,n.src=e,document.head.appendChild(n)}Object(a["onMounted"])((function(){if(null==document.getElementById("amapscript")){var t="https://webapi.amap.com/maps?v=1.4.15&key="+e.apiKey+"&plugin=AMap.Autocomplete,AMap.PlaceSearch,AMap.Geocoder,AMap.Geolocation";l(t,"amapscript")}})),Object(a["watch"])(i,(function(e){t.emit("update:modelValue",e)}));var d=null,r=null,u=null,p=null,s=null,m=e.lng,f=e.lat;function b(e){f=e.position.lat,m=e.position.lng,t.emit("update:modelValue",e.formattedAddress),t.emit("update:lat",f),t.emit("update:lng",m),O()}function O(){d.setCenter([m,f]),p=new AMap.Marker({position:[m,f],map:d});var t=[];t.push("<div class='input-card content-window-card'> "),t.push("<p class='input-item'>"+e.modelValue+"</p></div></div>");var n=new AMap.InfoWindow({content:t.join(""),offset:new AMap.Pixel(0,-35)});n.open(d,[m,f]),d.setFitView([p])}function w(e){s.getAddress(e.lnglat,(function(t,n){"complete"===t&&n.regeocode&&(A(n.regeocode.formattedAddress,e.lnglat.lat,e.lnglat.lng),p&&d.remove(p),O())}))}function j(){s=new AMap.Geocoder({extensions:"all"}),d=new AMap.Map(n.value,{resizeEnable:!0}),e.modelValue?O():(AMap.plugin("AMap.Geolocation",(function(){r=new AMap.Geolocation({enableHighAccuracy:!0,timeout:1e4,buttonOffset:new AMap.Pixel(10,20),zoomToAccuracy:!0,buttonPosition:"RB"})})),r.getCurrentPosition(),AMap.event.addListener(r,"complete",b)),d.on("click",w);var t=new AMap.Autocomplete({input:"tipinput"});u=new AMap.PlaceSearch({map:d}),d.plugin(["AMap.ToolBar"],(function(){d.addControl(new AMap.ToolBar)})),-1!==location.href.indexOf("&guide=1")&&d.setStatus({scrollWheel:!1}),AMap.event.addListener(t,"select",g),AMap.event.addListener(u,"markerClick",(function(e){A(e.data.address,e.data.location.lat,e.data.location.lng)}))}function A(e,n,a){f=n,m=a,i.value=e,t.emit("update:modelValue",e),t.emit("update:lat",n),t.emit("update:lng",a)}function g(e){var t=e.poi;u.setCity(t.adcode),u.search(t.name),A(t.district+t.address,t.location.lat,t.location.lng)}return{init:j,searchText:o,drawer:c,mapAddress:i,container:n}}});n("e6c3");p.render=u;t["default"]=p},"0cf3":function(e,t,n){},e6c3:function(e,t,n){"use strict";n("0cf3")}}]);